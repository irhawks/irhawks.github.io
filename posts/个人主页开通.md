---
title: Github主页修整记
tags: github
date : 2015-06-20
author : irhawks
---

建主页有许多种选择。这些方案可以分成静态主页方案与动态主页方案两大类。动态主页的托管的方式可能复杂一些，需要维护的代价似乎比较高。此外，动态主页里面的内容在转成可打印的版本的时候质量也会缩水。最理想的情况自然是一边能够生成HTML文档，另一方面，不经重新修改，可以转成其它的格式，特别是LaTeX的格式。

但是实际中能像LaTeX那样有表现力，又有丰富宏包支持的格式还真不多。Markdown等都过于简单了。之前的实践中，LaTeX格式与HTML对比中，主要的不一致有：

1.LaTeX中有wrapfigure、caption宏包可以调整图片，但是在HTML中的调整就得手工编码了。因为实在是没有学习HTML的排版细节问题；此外，LaTeX的表格转成HTML的表格也不太容易，特别是有对齐、指定宽度的表格，换到HTML页面上往往不好看。

2.数学公式中，使用MathJax中也只能使用预定义的公式集。但是在编程语言中所用的符号，与在逻辑中所用的符号不同，范畴论的符号，跟在线性代数中也非常不同。在MathJax中能够自定义数学公式命令是必须的，但是又是比较麻烦的。高级的框架，如交换图、amssymb、eulervm宏包提供的符号，似乎也得重新配置。单配置来说并不困难，可是有时候需要变更宏包，这个时候又得手工同步。

3.LaTeX中有一些宏包来支持其高级的特性，比如算法宏包algorithmicx、语法高亮的宏包listings或者minted、排版化学公式的chemfig、排版UML图形的umlcd、排版音乐的abc宏包（其它的还有lilypond、musixtex，后面两者的可用性没有abc好）。但是这些特性在markdown或者reStructuredText中不那么自然。

4.本人一直在用Sphinx来写编程语言教程，效果还不错。但是博客是一种新的格式，展示的内容可能也比较杂。

5.还有一点，LaTeX与XeLaTeX中可以自由使用各种字体，间距也会调整得很好。但是像审阅打印稿一样阅读网页中的文章是不可行的。用于网页中增强可读性的方法有自己的一套逻辑。

后来发现，Pandoc远胜于其它的方式，至少在原则上，Pandoc可以以一种既简洁又一致的方法扩展自己的功能，虽然Sphinx也支持各种插件。但是在Pandoc中写filter更容易。


## 期望中的个人主页的结构

遇到这么多问题，首先需要明确对于个人主页抱有的期望有哪些。现在自己推荐的是Hakyll工具，相应地，在<http://jaspervdj.be/hakyll/examples.html>上有一些建好的网站的样式。其中，[Eric Walkingshaw的主页](http://web.engr.oregonstate.edu/~walkiner)、[Ian Ross的主页](http://www.skybluetrades.net)以及 [yogsototh的支持多语言的主页](http://yannesposito.com/)里面的几个特性吸引了我。

根据这几个网站，总结出个人期望的个人主页应当具有如下几个特点：

1.首页应当加强作者的介绍。可以添加上作者的感兴趣的编程语言、感兴趣的研究方面，以及目前的研究的动向。不能只是每天都是列表的重复。如果有可能，可以添加上Disqus评论、标签云、文章检索、改变外观的功能。

2.对多语言的支持。我们现在在英文与中文方面都各自有一些要表达的东西。为了国际化，得使用英文，但同时也想用中文表达一些意思。在同一页面中各种语言混杂起来显得非常奇怪，可读性也非常差。所以，一个网站，准备有中文的、英文的、混合的版本，并且可以按照不同的语言切换。

3.对文章预览的支持。文章内容的可读性比较因人而异，但是整体页面的风格对于找到合适的文章亦非常关键。展示文章列表的时候，是否文字应该醒目？是否有关键词？是否放置一些摘要？是否将日期与网页右侧对齐？个人希望这些功能能够组合在一起。必要的时候，也可以附加一些搜索功能。

## Pandoc与Hakyll没有直接支持的功能

Pandoc的设计确实令人印象深刻。但是目前要实现一个功能，还存在不足。Pandoc在机制方面可能足够好了，但是在“工作流”的处理上可能还不够好。比如说，出版的过程可能是首先确定题目，然后把封面设计与内容设计分开，在写各章的内容的时候，一般还要确定使用LaTeX的哪些Feature。如果Pandoc能够更好地支持“希望支持切角”，希望“把ACM SIG的论文格式改成IEEE Computer的论文格式”这样的语句，也许更好一些。或者，Pandoc最终能够做到“指定纸张大小”，“指定一个文类”，然后作者就可以只关心要写的内容了。

考虑到实际情况，个人希望在Pandoc与Hakyll里能够解决如下的问题：

1.处理LaTeX的更多的块。比如说，处理abc、theorem、definition等环境。

2.能够方便地定义LaTeX命令。

3.排版图片与表格的时候可以更简单一些。

4.能够更方便地绘制各种图表、示意图。

当然，这些问题有些并不是单独用Pandoc或者Hakyll来解决的。但是至少以后期望这些功能可以以一种更完整的方式集成在pandoc的markdown格式中。


## 已完成的事情、未完成的事件与展望

最近的作业特别多，时间也比较紧张。所以就先把个人主页弄到这里。有时间再添加内容、编写文档处理程序。

目前完成的事情是使用ssh就把主页上传过去，主页有master和source两个分支，分别用来保存网站和源代码。然后把文档和Travis相连接。

如果继续的话，可能需要加强以下几个方面的能力：

1. 熟悉在Github上面的开发流程。了解在多个人员参与的情况下，代码该怎样提交；出现突之后怎样解决；以及更好地使用Travis CI或者Trello等工具实现软件测试、质量评审

2. 了解一些HTML+CSS+JavaScript的知识，这是能够建立稍复杂一点的个人主页的基础知识

3. 了解Pandoc的语法格式，能够熟练地写出Filter；能够熟练改变Pandoc的LaTeX模板、HTML模板

4. 把Hakyll看成是Pandoc的构建工具。能够写出自己定制的文档编译器的cabal包。能够将其安装到系统当中，能够生成多页的HTML、生成一个LaTeX工程（多文件），比latexmk更方便地编译latex代码

5. 在文档编译器自己定义的基础上，能够在Pandoc中把TikZ图形、abc音乐、minted代码，定理、参考文献等在HTML格式与LaTeX格式中同时排版出来。
